{"version":3,"file":"scoped.js","sources":["../src/scoped.ts"],"sourcesContent":["import { associateDestroyableChild } from '@ember/destroyable';\nimport { type Scope, setScope } from './scope.ts';\n\nclass Scoped implements Scope {\n  constructor(readonly scope: Scope) {\n    setScope(this, scope);\n    associateDestroyableChild(scope, this);\n  }\n}\n\nconst Wrappers = new WeakMap<Scope, Scoped>();\n\nexport function scoped(scope: Scope): Scope {\n  let wrapper = Wrappers.get(scope);\n\n  if (wrapper === undefined) {\n    wrapper = new Scoped(scope);\n    Wrappers.set(scope, wrapper);\n  }\n\n  return wrapper;\n}\n"],"names":["Scoped","constructor","scope","setScope","associateDestroyableChild","Wrappers","WeakMap","scoped","wrapper","get","undefined","set"],"mappings":";;;AAGA,MAAMA,MAAM,CAAkB;EAC5BC,WAAWA,CAAUC,KAAY,EAAE;IAAA,IAAdA,CAAAA,KAAY,GAAZA,KAAY,CAAA;AAC/BC,IAAAA,QAAQ,CAAC,IAAI,EAAED,KAAK,CAAC,CAAA;AACrBE,IAAAA,yBAAyB,CAACF,KAAK,EAAE,IAAI,CAAC,CAAA;AACxC,GAAA;AACF,CAAA;AAEA,MAAMG,QAAQ,GAAG,IAAIC,OAAO,EAAiB,CAAA;AAEtC,SAASC,MAAMA,CAACL,KAAY,EAAS;AAC1C,EAAA,IAAIM,OAAO,GAAGH,QAAQ,CAACI,GAAG,CAACP,KAAK,CAAC,CAAA;EAEjC,IAAIM,OAAO,KAAKE,SAAS,EAAE;AACzBF,IAAAA,OAAO,GAAG,IAAIR,MAAM,CAACE,KAAK,CAAC,CAAA;AAC3BG,IAAAA,QAAQ,CAACM,GAAG,CAACT,KAAK,EAAEM,OAAO,CAAC,CAAA;AAC9B,GAAA;AAEA,EAAA,OAAOA,OAAO,CAAA;AAChB;;;;"}